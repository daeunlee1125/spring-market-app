<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.co.shoply.mapper.CsFaqMapper">

    <!-- 목록 조회 -->
    <select id="selectFaqList" resultType="kr.co.shoply.entity.CsFaq">
        SELECT *
        FROM CS_FAQ
        WHERE 1=1
        <if test="cate1 != null and cate1 != ''">
            AND cs_faq_cate1 = #{cate1}
        </if>
        <if test="cate2 != null and cate2 != ''">
            AND cs_faq_cate2 = #{cate2}
        </if>
        ORDER BY cs_faq_no DESC
    </select>

    <!-- 전체 목록 -->
    <select id="selectAllFaqs" resultType="kr.co.shoply.dto.CsFaqDTO">
        SELECT *
        FROM CS_FAQ
        ORDER BY cs_faq_no DESC
            FETCH FIRST 10 ROWS ONLY
    </select>

    <!-- 1차 카테고리만 -->
    <select id="selectFaqsByCate1" resultType="kr.co.shoply.dto.CsFaqDTO">
        SELECT *
        FROM CS_FAQ
        WHERE cs_faq_cate1 = #{cate1}
        ORDER BY cs_faq_no DESC
            FETCH FIRST 10 ROWS ONLY
    </select>

    <!-- 1차 + 2차 카테고리 -->
    <select id="selectFaqsByCate1AndCate2" resultType="kr.co.shoply.dto.CsFaqDTO">
        SELECT *
        FROM CS_FAQ
        WHERE cs_faq_cate1 = #{cate1}
          AND cs_faq_cate2 = #{cate2}
        ORDER BY cs_faq_no DESC
            FETCH FIRST 10 ROWS ONLY
    </select>



    <!-- 단건 조회 -->
    <select id="selectFaq" resultType="kr.co.shoply.entity.CsFaq">
        SELECT * FROM CS_FAQ WHERE cs_faq_no = #{cs_faq_no}
    </select>

    <!-- 등록 -->
    <insert id="insertFaq" parameterType="kr.co.shoply.entity.CsFaq">
        INSERT INTO CS_FAQ (
            cs_faq_no,
            cs_faq_cate1,
            cs_faq_cate2,
            cs_faq_title,
            cs_faq_content,
            cs_faq_hit,
            cs_faq_rdate
        )
        VALUES (
                   cs_faq_seq.NEXTVAL,
                   #{cs_faq_cate1},
                   #{cs_faq_cate2},
                   #{cs_faq_title},
                   #{cs_faq_content},
                   0,
                   SYSDATE
               )
    </insert>

    <!--  수정 -->
    <update id="updateFaq" parameterType="kr.co.shoply.entity.CsFaq">
        UPDATE CS_FAQ
        SET
            cs_faq_cate1 = #{cs_faq_cate1},
            cs_faq_cate2 = #{cs_faq_cate2},
            cs_faq_title = #{cs_faq_title},
            cs_faq_content = #{cs_faq_content}
        WHERE cs_faq_no = #{cs_faq_no}
    </update>

    <!-- 단건 삭제 -->
    <delete id="deleteFaq">
        DELETE FROM CS_FAQ WHERE cs_faq_no = #{cs_faq_no}
    </delete>

    <!-- 선택 삭제 -->
    <delete id="deleteFaqs">
        DELETE FROM CS_FAQ WHERE cs_faq_no IN
        <foreach collection="faqIds" item="id" open="(" separator="," close=")">
            #{id}
        </foreach>
    </delete>

</mapper>
