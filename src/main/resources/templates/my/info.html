<div th:replace="~{my/_head.html}"></div>

<main class="container">
    <div class="sidebar">
        <h2>나의 쇼핑 정보</h2>
        <ul>
            <li><a th:href="@{/my/home}">마이페이지 홈</a></li>
            <li><a th:href="@{/my/order}">전체주문내역</a></li>
            <li><a th:href="@{/my/point}">포인트내역</a></li>
            <li><a th:href="@{/my/coupon}">쿠폰</a></li>
            <li><a th:href="@{/my/review}">나의리뷰</a></li>
            <li><a th:href="@{/my/qna}">문의하기</a></li>
            <li><a th:href="@{/my/info}" class="active">나의설정</a></li>
        </ul>
    </div>
    <div class="content">
        <div class="main-content-header">
            <div class="info-summary">
                <div class="info-item">
                    <div class="count" th:text="${orderCount}">2</div>
                    <div>주문</div>
                </div>
                <div class="info-item">
                    <div class="count" th:text="${couponCount}">1</div>
                    <div>쿠폰</div>
                </div>
                <div class="info-item">
                    <div class="count" th:text="${#numbers.formatInteger(pointTotal, 3, 'COMMA')}">1,000</div>
                    <div>포인트</div>
                </div>
                <div class="info-item">
                    <div class="count" th:text="${qnaCount}">1</div>
                    <div>문의</div>
                </div>
            </div>
        </div>

        <div class="banner">
            810 x 86 배너 광고
        </div>

        <div class="info-section">
            <h3>나의 설정</h3>
            <form>
                <table class="info-table">
                    <tbody>
                    <tr>
                        <th>사용자 ID</th>
                        <td th:text="${memberInfo.mem_id}"></td>
                    </tr>
                    <tr>
                        <th>비밀번호</th>
                        <td>
                            <button type="button" onclick="showPasswordModal()">변경</button>
                        </td>
                    </tr>
                    <tr>
                        <th>이름</th>
                        <td th:text="${memberInfo.mem_name}"></td>
                    </tr>
                    <tr>
                        <th>생년월일</th>
                        <td th:text="${memberInfo.mem_birth}"></td>
                    </tr>
                    <tr>
                        <th>Email</th>
                        <td>
                            <input type="text" id="emailId" th:value="${#strings.substringBefore(memberInfo.mem_email, '@')}">@
                            <select id="emailDomain" onchange="checkEmailDomain()">
                                <option th:each="domain : ${{'naver.com'}}"
                                        th:value="${domain}" th:text="${domain} == 'self' ? '직접입력' : ${domain}"
                                        th:selected="${#strings.substringAfter(memberInfo.mem_email, '@') == domain}">
                                </option>
                            </select>
                            <input type="text" id="emailInput" placeholder="직접입력"
                                   th:style="${#strings.substringAfter(memberInfo.mem_email, '@') == 'self'} ? 'display: inline-block;' : 'display: none;'">
                            <button type="button" onclick="editEmail()">수정하기</button>
                        </td>
                    </tr>
                    <tr>
                        <th>휴대폰</th>
                        <td>
                            <input type="text" th:value="${#strings.arraySplit(memberInfo.mem_hp, '-')[0]}" style="width: 50px;"> -
                            <input type="text" th:value="${#strings.arraySplit(memberInfo.mem_hp, '-')[1]}" style="width: 50px;"> -
                            <input type="text" th:value="${#strings.arraySplit(memberInfo.mem_hp, '-')[2]}" style="width: 50px;">
                            <button type="button" onclick="editPhone()">수정하기</button>
                        </td>
                    </tr>
                    <tr>
                        <th>주소</th>
                        <td>
                            <div style="display: flex; gap: 5px; margin-bottom: 5px;">
                                <input type="text" placeholder="우편번호" style="width: 80px;" th:value="${memberInfo.mem_zip}" readonly>
                                <button type="button" onclick="searchAddress()">주소검색</button>
                            </div>
                            <input type="text" class="address-input" placeholder="기본주소입력" style="width: 400px;" th:value="${memberInfo.mem_addr1}" readonly>
                            <input type="text" class="address-input" placeholder="상세주소입력" style="width: 400px; margin-top: 5px;" th:value="${memberInfo.mem_addr2}">
                        </td>
                    </tr>
                    </tbody>
                </table>
                <br>
                <td>
                    <button type="button" class="withdrawal-btn" onclick="confirmWithdrawal()">탈퇴하기</button>
                </td>
                <div class="button-group">
                    <button type="submit" class="save-btn" onclick="saveChanges()">수정하기</button>
                </div>
            </form>
        </div>
    </div>
</main>

<div th:replace="~{my/_tail.html}"></div>