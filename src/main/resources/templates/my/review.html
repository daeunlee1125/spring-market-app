
<!-- review.html -->
<div th:replace="~{my/_head.html}"></div>

<main class="container">
    <div class="sidebar">
        <ul>
            <li><a th:href="@{/my/home}">마이페이지 홈</a></li>
            <li><a th:href="@{/my/order}">전체주문내역</a></li>
            <li><a th:href="@{/my/point}">포인트내역</a></li>
            <li><a th:href="@{/my/coupon}">쿠폰</a></li>
            <li><a th:href="@{/my/review}" class="active">나의리뷰</a></li>
            <li><a th:href="@{/my/qna}">문의하기</a></li>
            <li><a th:href="@{/my/info}">나의설정</a></li>
        </ul>
    </div>
    <div class="content">

        <div class="main-content-header">
            <h2>나의 쇼핑 정보</h2>
            <div class="info-summary">
                <div class="info-item">
                    <div class="count" th:text="${orderCount}">2</div>
                    <div>주문</div>
                </div>
                <div class="info-item">
                    <div class="count" th:text="${couponCount}">1</div>
                    <div>쿠폰</div>
                </div>
                <div class="info-item">
                    <div class="count" th:text="${#numbers.formatInteger(pointTotal, 0, 'COMMA')}">1,000</div>
                    <div>포인트</div>
                </div>
                <div class="info-item">
                    <div class="count" th:text="${qnaCount}">1</div>
                    <div>문의</div>
                </div>
            </div>
        </div>

        <div class="banner">810 x 86 배너 광고</div>

        <table class="review-table">
            <thead>
            <tr>
                <th>번호</th>
                <th>상품명</th>
                <th>내용</th>
                <th>별점</th>
                <th>작성일</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="review, status : ${reviewPage.content}">
                <td th:text="${(reviewPage.number * 10) + status.count}"></td>
                <td th:text="${review.prodName}">상품번호 / 상품명</td>
                <td th:text="${review.rev_content}">배송이 빠릅니다. 잘 사용하겠습니다.</td>
                <td class="star-rating" th:text="${review.rev_rating}">5</td>
                <td th:text="${#dates.format(review.rev_rdate, 'yyyy-MM-dd')}">2022-12-10</td>
            </tr>
            <tr th:if="${reviewPage.empty}">
                <td colspan="5" style="text-align: center;">작성된 리뷰가 없습니다.</td>
            </tr>
            </tbody>
        </table>

        <!-- 페이지네이션 부분을 이렇게 수정하세요 -->
        <div class="pagination">
            <!-- 이전 버튼 -->
            <a th:if="${reviewPage.hasPrevious()}"
               th:href="@{/my/review(page=${reviewPage.number - 1})}"
               class="btn-prev">&lt; 이전</a>
            <button th:unless="${reviewPage.hasPrevious()}"
                    disabled
                    class="btn-prev">&lt; 이전</button>

            <!-- 페이지 번호 -->
            <th:block th:each="pageNum : ${#numbers.sequence(0, reviewPage.totalPages - 1)}">
                <a th:if="${pageNum != reviewPage.number}"
                   th:href="@{/my/review(page=${pageNum})}"
                   th:text="${pageNum + 1}"
                   class="page-btn"></a>
                <button th:if="${pageNum == reviewPage.number}"
                        th:text="${pageNum + 1}"
                        class="page-btn active"
                        disabled></button>
            </th:block>

            <!-- 다음 버튼 -->
            <a th:if="${reviewPage.hasNext()}"
               th:href="@{/my/review(page=${reviewPage.number + 1})}"
               class="btn-next">다음 &gt;</a>
            <button th:unless="${reviewPage.hasNext()}"
                    disabled
                    class="btn-next">다음 &gt;</button>
        </div>
    </div>
</main>
<script>
// 별점 표시
document.querySelectorAll('.star-rating').forEach(el => {
    const rating = parseInt(el.textContent.trim());
    if (!isNaN(rating)) {
        el.textContent = '★'.repeat(rating);
    }
});
</script>


<div th:replace="~{my/_tail.html}"></div>