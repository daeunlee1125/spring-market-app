<div th:replace="~{product/_head.html}"></div>

            <main>
                <div class="main-size">
                    <div class="main-nav-div"> <!-- 네비 -->
                        <nav class="main-nav">
                            <a th:href="@{/index}"><span>HOME</span></a>
                            <span>&nbsp;&nbsp;>&nbsp;&nbsp;</span>
                            <span>[[${cate2DTO.cate1_name}]]</span>
                            <span>&nbsp;&nbsp;>&nbsp;&nbsp;</span>
                            <span>[[${cate2DTO.cate2_name}]]</span>
                        </nav>
                    </div>
                    <div class="product-view-container">

                        <div class="product-image-section">
                            <div class="main-image">
                                <img th:src="@{/image/test1.jpeg}" alt="베이직 레더 벨트">
                            </div>
                        </div>
                        <div class="product-info-section" data-product-price="16830">
                            <div class="info-header">
                                <span class="brand-store" th:text="${productDTO.getProd_company()}">신세계백화점</span>
                                <h2>
                                    <span class="brand-name" th:text="${productDTO.getProd_company()}">지오다노</span>
                                    <span class="product-name" th:text="${productDTO.getProd_name()}">베이직 레더 벨트 130004</span>
                                </h2>
                                <a href="#review-list-container"> <!-- 리뷰로 넘어가는 링크 -->
                                    <div class="rating">
                                        <div class="star-rating" th:data-score="${productDTO.getAvgRating()}">
                                            <div class="star-rating-fill">
                                                <span>★</span><span>★</span><span>★</span><span>★</span><span>★</span>
                                            </div>
                                            <div class="star-rating-base">
                                                <span>★</span><span>★</span><span>★</span><span>★</span><span>★</span>
                                            </div>
                                        </div>
                                        <span class="rating-score" th:text="${productDTO.getAvgRating()}">4.6</span>
                                        <span class="review-count" th:text="'('+${productDTO.getCntRating()}+'건)'">(152건)</span>
                                    </div>
                                </a>
                            </div>

                            <div class="info-price">
                                <div class="price-original">
                                    <span class="original" th:text="${#numbers.formatDecimal(productDTO.getProd_price(), 0, 'COMMA', 0, 'POINT')}">18,700원</span>
                                </div>
                                <div class="price-final">
                                    <span class="discount-rate" th:text="${productDTO.getProd_sale()}+'%'">10%</span>
                                    <span class="final" th:text="${#numbers.formatDecimal(productDTO.getRealPrice(), 0, 'COMMA', 0, 'POINT')}">16,830</span>
                                    <span class="unit">원</span>
                                </div>
                            </div>

                            <div class="info-delivery">
                                <div class="delivery-row">
                                    <span class="label">배송비</span>
                                    <span class="content" th:text="${#numbers.formatDecimal(productDTO.getProd_deliv_price(), 0, 'COMMA', 0, 'POINT')}">3,000원 (3만원 이상 무료)</span>
                                    <span class="unit">원</span>
                                </div>
                                <div class="delivery-row">
                                    <span class="label"></span>
                                    <span class="content arrival-info" th:text="${formattedDate + '(' + week + ')' + ' 도착예정'}">9/29(월) 도착 예정</span>
                                </div>
                                <div class="delivery-row">
                                    <span class="label">원산지</span>
                                    <span class="content">상세설명 참조</span>
                                </div>
                            </div>
                            <th:block th:if="${OpDtoList == null or #lists.isEmpty(OpDtoList)}">
                                <div id="no-option-product" th:data-price="${productDTO.getRealPrice()}">
                                    <div class="selected-item">
                                        <span class="item-name" th:text="${productDTO.getProd_name()}">상품 이름</span>
                                        <div class="quantity-counter">
                                            <button type="button" class="btn-minus">-</button>
                                            <input type="text" class="quantity-input" value="1" readonly>
                                            <button type="button" class="btn-plus">+</button>
                                        </div>
                                    </div>
                                </div>
                            </th:block>

                            <th:block th:unless="${OpDtoList == null or #lists.isEmpty(OpDtoList)}">
                                <div class="info-options" th:each="opDTO : ${OpDtoList}">
                                    <select class="select-option" name="color">
                                        <option value="" th:text="${opDTO.getOpt_name()} + ' 선택하세요'">색상 선택하세요.</option>
                                        <th:block th:each="opVal : ${opDTO.getOptValList()}">
                                            <option th:value="${opVal}" th:text="${opVal}"></option>
                                        </th:block>
                                    </select>
                                </div>

                                <div id="selected-options-list"
                                     th:data-price="${productDTO.getRealPrice()}"
                                     th:data-name="${productDTO.getProd_name()}">
                                </div>
                            </th:block>

                            <div class="info-purchase">
                                <div class="total-price">
                                    <span>총 상품금액</span>
                                    <strong id="grand-total-price"
                                            th:text="${#numbers.formatInteger(productDTO.getRealPrice(), 3, 'COMMA')} + '원'">0원</strong>
                                </div>
                                <div class="action-buttons">
                                    <button type="button" id="btn-add-to-cart" class="btn-cart" th:data-prod-no="${productDTO.getProd_no()}">장바구니</button>
                                    <a th:href="@{/product/order}"><button class="btn-buy">바로구매</button></a>
                                </div>
                            </div>

                            <div class="banner">
                                <img th:src="@{/inc/image/banner-top.jpg}" alt="배너 광고">
                            </div>
                        </div>
                    </div>

                </div>

                <div class="product-detail">
                    <nav class="product-detail-nav">
                        <ul>
                            <li class="active"><a href="#detail-info">상품상세정보</a></li>
                            <li><a href="#detail-review" th:text="'고객리뷰(' + ${productDTO.getCntRating()}+')'" >고객리뷰 (0)</a></li>
                            <li><a href="#detail-exchange">교환/반품 안내</a></li>
                        </ul>
                    </nav>
                    <div class="nav-placeholder"></div>

                    <div id="detail-info" class="detail-content">
                        <p style="text-align: center; font-size: 18px; color: #888; margin-top: 10px; padding: 0 0 40px;" th:text="'상품 번호 : ' + ${productDTO.getProd_no()}">
                            상품 번호: 1000722586634<br>
                            모델 번호: Y0251LCL158S1N00125F
                        </p>
                        <img th:src="@{/image/product/wc_1_thumb1.jpg}" alt="SSG Guarantee">
                        <img th:src="@{/image/product/wc_1_thumb2.jpg}" alt="짧은 상세 이미지">

                        <div class="long-detail-container">
                            <img th:src="@{/image/product/wc_1_detail.jpg}" alt="긴 상세 이미지" class="long-detail-image">
                            <div class="fade-overlay"></div>
                        </div>
                        <button type="button" class="toggle-detail-btn">상세정보 펼쳐보기 ▼</button>
                    </div>

                    <div id="detail-review" class="detail-content" th:data-prod-no="${productDTO.getProd_no()}">
                        <div class="review-header">
                            <div class="review-tabs">
                                <a href="#" class="active" th:text="'상품리뷰(' + ${productDTO.getCntRating()} + ')'">전체(562)</a>
                            </div>
                        </div>

                        <div id="review-list-container" class="review-list">
                            <div class="review-item" th:each="reviewDTO : ${reviewDTOList}">
                                <div class="review-meta-top">
                                    <div class="review-author">
                                        <div class="star-rating" th:data-score="${reviewDTO.getRev_rating()}">
                                            <div class="star-rating-fill">
                                                <span>★</span><span>★</span><span>★</span><span>★</span><span>★</span>
                                            </div>
                                            <div class="star-rating-base">
                                                <span>★</span><span>★</span><span>★</span><span>★</span><span>★</span>
                                            </div>
                                        </div>
                                        <div class="rating-stars" th:text="'('+${reviewDTO.getRev_rating()}+')'">★★★★★</div>
                                        <div class="user-id" th:text="${reviewDTO.getPrivateMemId()}">rif*******</div>
                                    </div>
                                </div>
                                <div class="review-content" th:text="${reviewDTO.getRev_content()}">
                                    <p>늘 사용하는 제품인데 특히 환절기 보습에 좋은 것 같습니다. 스킨부터 탄탄하게 수분을 쌓아올리니 덜 건조해요 다만 바뀐 패키지보다는 이전이 더 고급스러운 것 같아 아쉬워요</p>
                                    <div class="review-photo">
                                        <img th:src="@{/inc/image/review1.jpg}" alt="리뷰 사진 1">
                                    </div>
                                </div>
                                <div class="review-meta-bottom">
                                    <span class="date" th:text="${reviewDTO.getRev_rdate()}">2025.09.22</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="pagination-container">
                        <div class="pagination" id="review-pagination" th:data-total-pages="${totalPages}">
                            <a href="#" class="page-link prev disabled" th:if="${totalPages > 1}">이전</a>

                            <th:block th:if="${totalPages > 0}">
                                <a th:each="i : ${#numbers.sequence(1, totalPages)}"
                                   th:class="${i == 1} ? 'page-link active' : 'page-link'"
                                   href="#" th:data-page="${i}" th:text="${i}"></a>
                            </th:block>

                            <a href="#" class="page-link next" th:if="${totalPages > 1}"
                               th:classappend="${totalPages <= 1 ? 'disabled' : ''}">다음</a>
                        </div>
                    </div>

                    <div id="detail-exchange" class="detail-content">
                        <div class="exchange-info-box">
                            <h3>교환/반품 안내</h3>
                            <p>고객님의 단순 변심으로 인한 교환/반품은 실제 상품을 수령하신 날로부터 7일 이내에 신청 가능합니다.</p>

                            <table>
                                <colgroup>
                                    <col style="width: 150px;">
                                    <col>
                                </colgroup>
                                <tbody>
                                    <tr>
                                        <th>신청 방법</th>
                                        <td>홈페이지 > 마이페이지 > 주문/배송 조회 > '교환/반품 신청'</td>
                                    </tr>
                                    <tr>
                                        <th>반품 배송비</th>
                                        <td>
                                            <strong>편도 3,000원</strong> (최초 배송비 무료인 경우 6,000원 부과) <br>
                                            상품 불량, 오배송의 경우 판매자 부담
                                        </td>
                                    </tr>
                                    <tr>
                                        <th>보내실 곳</th>
                                        <td th:text="${'('+memberDTO.getMem_zip() + ') ' + memberDTO.getMem_addr1() + ', ' + memberDTO.getMem_addr2()}">(12345) OO광역시 OO구 OO로 123, K마켓 물류센터</td>
                                    </tr>
                                </tbody>
                            </table>

                            <h4>교환/반품이 불가능한 경우</h4>
                            <ul>
                                <li>상품 수령 후 7일을 초과한 경우</li>
                                <li>고객님의 책임 있는 사유로 상품이 멸실 또는 훼손된 경우 (단, 상품 내용 확인을 위해 포장 등을 훼손한 경우는 제외)</li>
                                <li>고객님의 사용 또는 일부 소비에 의하여 상품의 가치가 현저히 감소한 경우 (예: 화장품, 식품)</li>
                                <li>시간의 경과에 의하여 재판매가 곤란할 정도로 상품의 가치가 현저히 감소한 경우</li>
                                <li>복제가 가능한 상품 등의 포장을 훼손한 경우 (예: CD/DVD, 게임, 도서의 경우 포장 개봉 시)</li>
                                <li>상품의 구성품(사은품, 택, 박스 등)을 분실하였거나 훼손한 경우</li>
                            </ul>

                            <h4>환불 안내</h4>
                            <ul>
                                <li>반품하신 상품이 물류센터에 도착하여 검수가 완료된 후 환불 처리가 진행됩니다.</li>
                                <li><strong>신용카드</strong>: 카드사 승인 취소까지 약 3~5 영업일이 소요됩니다.</li>
                                <li><strong>무통장 입금/계좌이체</strong>: 고객님의 계좌로 1~2 영업일 내에 환불됩니다.</li>
                            </ul>
                        </div>
                    </div>


                </div>


            </div>
        </main>
    </div>
</div>

<div th:replace="~{product/_tail.html}"></div>